{
  "$schema": "http://json-schema.org/draft-07/schema",
  "$id": "https://raw.githubusercontent.com/your-org/datascout/master/nextflow_schema.json",
  "title": "DATASCOUT pipeline parameters",
  "description": "A pipeline for fetching protein and sequence data from multiple databases: ENA, UniProt, OrthoDB, and RFAM",
  "type": "object",
  "allOf": [
    { "$ref": "#/definitions/input_output_options" },
    { "$ref": "#/definitions/database_options" },
    { "$ref": "#/definitions/processing_options" }
  ],
  "definitions": {
    "input_output_options": {
      "title": "Input/output options",
      "type": "object",
      "fa_icon": "fas fa-terminal",
      "description": "Define where the pipeline should find input data and save output data.",
      "required": ["samplesheet"],
      "properties": {
        "samplesheet": {
          "type": "string",
          "format": "file-path",
          "exists": true,
          "pattern": "^\\S+\\.(csv|tsv|yaml|yml)$",
          "description": "Path to comma-separated file containing information about the samples and genomes.",
          "help_text": "You will need to create a samplesheet with information about the samples you would like to analyse before running the pipeline.",
          "fa_icon": "fas fa-file-csv"
        },
        "outdir": {
          "type": "string",
          "format": "directory-path",
          "description": "The output directory where the results will be saved.",
          "fa_icon": "fas fa-folder-open",
          "default": "results"
        }
      }
    },
    "database_options": {
      "title": "Database options",
      "type": "object",
      "fa_icon": "fas fa-database",
      "description": "Options for database paths and configurations",
      "properties": {
        "taxdump": {
          "type": "string",
          "format": "file-path",
          "description": "Path to NCBI taxonomy dump file",
          "help_text": "Path to the NCBI taxonomy dump file used for taxonomic lineage parsing",
          "fa_icon": "fas fa-file-archive"
        },
        "sqlite": {
          "type": "string",
          "format": "directory-path",
          "description": "Path to NCBI sqlite database",
          "help_text": "Path to NCBI sqlite database used for taxonomic lineage parsing",
          "fa_icon": "fas fa-folder"
        },
        "rfam_db": {
          "type": "string",
          "format": "file-path",
          "description": "Path to RFAM database file",
          "help_text": "Path to the RFAM database file for RNA family searches. Defaults to bundled database in assets/",
          "fa_icon": "fas fa-file",
          "default": "${projectDir}/assets/rfam_db.txt"
        }
      }
    },
    "processing_options": {
      "title": "Processing options",
      "type": "object",
      "fa_icon": "fas fa-cogs",
      "description": "Options for controlling pipeline processing behavior",
      "properties": {
        "max_runs": {
          "type": "integer",
          "minimum": 1,
          "maximum": 10000,
          "default": 100,
          "description": "Maximum number of runs to process",
          "help_text": "Limits the number of sequencing runs that will be downloaded and processed",
          "fa_icon": "fas fa-hashtag"
        },
        "sourmash": {
          "type": "boolean",
          "default": false,
          "description": "Enable sourmash filtering",
          "help_text": "When enabled, uses sourmash for sequence similarity filtering instead of direct FASTQ download",
          "fa_icon": "fas fa-filter"
        },
        "swissprot": {
          "type": "boolean",
          "default": false,
          "description": "Use SwissProt database only",
          "help_text": "When enabled, restricts UniProt searches to SwissProt (manually curated) entries only",
          "fa_icon": "fas fa-certificate"
        },
        "max_orthodb_clusters": {
          "type": ["integer", "null"],
          "minimum": 1,
          "description": "Limit the number of OrthoDB clusters to fetch (mainly for testing)",
          "help_text": "When set, limits the number of OrthoDB clusters fetched per sample. Useful for testing.",
          "fa_icon": "fas fa-hashtag",
          "default": null
        },
        "order_runs_by_smallest": {
          "type": ["boolean", "null"],
          "description": "Order fastq files from smallest to largest size when selecting transcriptome data",
          "help_text": "When enabled, the pipeline will prioritize smaller fastq files when selecting transcriptome data from ENA. Useful for testing",
          "fa_icon": "fas fa-hashtag",
          "default": false
        }        
      }
    }
  }
}
