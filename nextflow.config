/*
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Ensembl/datascout Nextflow config file
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Default config options for all compute environments
----------------------------------------------------------------------------------------
*/

// Global default params, used in configs
params {

    // TODO nf-core: Specify your pipeline's command line flags
    // Input options
    samplesheet = "/hps/software/users/rdf/metagenomics/service-team/users/vkale/datascout/tests/samplesheet.csv"
    rfam_db = "/hps/software/users/rdf/metagenomics/service-team/users/vkale/datascout/conf/rfam_db.conf"
    ncbi_db = "/homes/vkale/.etetoolkit/taxa.sqlite"
    taxdump = "/hps/software/users/rdf/metagenomics/service-team/users/vkale/datascout/dbs/taxdump.tar.gz"
    output = "/hps/software/users/rdf/metagenomics/service-team/users/vkale/datascout/test_output"
    sourmash = true
    max_runs = 10

}

// Load base.config by default for all pipelines
includeConfig 'conf/base.config'

profiles {
    singularity {
       singularity.enabled = true
       singularity.autoMounts = true
       singularity.cacheDir = "/hps/nobackup/rdf/metagenomics/service-team/singularity-cache/"
       registry = "quay.io"
    }

    lsf {
        workDir = params.workdir
        params.databases = params.dbs
        executor {
            name = "lsf"
            queueSize = 200
        }
        params.cloudProcess = true
        process.cache = "lenient"
    }

    slurm {
        workDir = "/hps/nobackup/rdf/metagenomics/service-team/nextflow-workdir/datascout"
        executor {
            name = "slurm"
            queueSize = 200
        }
        params.cloudProcess = true
        process.cache = "lenient"
    }

    local {
         docker {
            enabled = true
            autoMounts = true
            registry = 'quay.io'
            userEmulation = true
            runOptions = "--platform linux/x86_64"
        }
        executor {
            name = "local"
            cpus = 2
            memory = '1 GB'
        }
        includeConfig 'config/local.config'
    }
}
